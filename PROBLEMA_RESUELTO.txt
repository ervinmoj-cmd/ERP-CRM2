â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘            âœ… PROBLEMA DEL EMAIL RESUELTO                     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Fecha: 09/12/2025

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ” PROBLEMAS ENCONTRADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ PROBLEMA 1: Nombre de etapa incorrecto
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ El cÃ³digo buscaba: "CotizaciÃ³n Enviada" (mayÃºscula)
â€¢ La etapa real es: "CotizaciÃ³n enviada" (minÃºscula)
â€¢ Resultado: El cÃ³digo NUNCA se ejecutaba

âœ… SOLUCIÃ“N: Corregido el nombre en app.py

âŒ PROBLEMA 2: Sin logs de debugging
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ No habÃ­a forma de saber por quÃ© no se enviaba
â€¢ No se mostraban mensajes en consola
â€¢ DifÃ­cil de diagnosticar

âœ… SOLUCIÃ“N: Agregados logs detallados

âŒ PROBLEMA 3: Email del cliente no configurado
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Los tratos no tenÃ­an email del cliente
â€¢ Sistema no podÃ­a enviar sin destinatario

âœ… SOLUCIÃ“N: Ahora muestra claramente si falta email

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CORRECCIONES APLICADAS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. âœ… Nombre de etapa corregido
   â””â”€ "CotizaciÃ³n Enviada" â†’ "CotizaciÃ³n enviada"

2. âœ… Logs detallados agregados
   â”œâ”€ Muestra etapa y puesto del usuario
   â”œâ”€ Indica si encuentra cotizaciÃ³n vinculada
   â”œâ”€ Muestra si hay email del cliente
   â”œâ”€ Indica cuando inicia envÃ­o
   â””â”€ Muestra errores especÃ­ficos

3. âœ… Mensajes de error claros
   â”œâ”€ "Email del cliente NO configurado"
   â”œâ”€ "No hay cotizaciÃ³n vinculada"
   â”œâ”€ "Trato no encontrado"
   â””â”€ Stack trace completo en caso de error

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ CÃ“MO USAR EL SISTEMA AHORA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PASO 1: Reinicia el servidor
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ DetÃ©n el servidor actual (Ctrl+C)
â€¢ Ejecuta: python app.py

PASO 2: Configura el trato COMPLETO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Antes de mover a "CotizaciÃ³n enviada", asegÃºrate de:

âœ… 1. Vincular cotizaciÃ³n al trato
   â””â”€ Usa el selector "Vincular CotizaciÃ³n"

âœ… 2. Agregar EMAIL del cliente
   â””â”€ Campo: "ğŸ“§ Email del Cliente"
   â””â”€ Ejemplo: cliente@empresa.com

âœ… 3. Agregar firma del vendedor (opcional)
   â””â”€ Campo: "âœï¸ Firma del Vendedor"
   â””â”€ Ejemplo: "Ing. Juan PÃ©rez - Ventas"

âœ… 4. Agregar mensaje personalizado (opcional)
   â””â”€ Campo: "ğŸ’¬ Mensaje Personalizado"

âœ… 5. GUARDAR el trato
   â””â”€ BotÃ³n: "ğŸ’¾ Guardar Trato"

PASO 3: Mover a "CotizaciÃ³n enviada"
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â€¢ Arrastra el trato a la columna "CotizaciÃ³n enviada"
â€¢ O usa el selector de etapa

PASO 4: Verifica en la CONSOLA del servidor
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
DeberÃ­as ver estos mensajes:

ğŸ” DEBUG: Trato movido a 'CotizaciÃ³n enviada' por usuario con puesto 'Vendedor'
âœ… CondiciÃ³n cumplida: Etapa='CotizaciÃ³n enviada' y Puesto='Vendedor'
âœ… CotizaciÃ³n encontrada: T-00008
ğŸ“§ Email del cliente: cliente@empresa.com
âœ… Iniciando envÃ­o de email...
âœ… PDF de cotizaciÃ³n T-00008 enviado a cliente@empresa.com

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âŒ MENSAJES DE ERROR POSIBLES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ERROR 1: Email del cliente no configurado
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mensaje:
âŒ ERROR: No se puede enviar email - Email del cliente NO configurado

SOLUCIÃ“N:
1. Edita el trato
2. Agrega email en "ğŸ“§ Email del Cliente"
3. Guarda el trato
4. Mueve a "CotizaciÃ³n enviada" nuevamente

ERROR 2: Sin cotizaciÃ³n vinculada
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mensaje:
âŒ ERROR: El trato no tiene cotizaciones vinculadas

SOLUCIÃ“N:
1. Edita el trato
2. Vincula una cotizaciÃ³n usando el selector
3. Guarda el trato
4. Mueve a "CotizaciÃ³n enviada" nuevamente

ERROR 3: Usuario no es vendedor
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mensaje:
â„¹ï¸ Puesto 'Administrador' no envÃ­a cotizaciones automÃ¡ticamente

SOLUCIÃ“N:
â€¢ Solo usuarios con puesto "Vendedor" envÃ­an automÃ¡ticamente
â€¢ Otros puestos no activan el envÃ­o automÃ¡tico

ERROR 4: Error en servidor SMTP
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Mensaje:
âŒ Error enviando PDF: [detalles del error]

SOLUCIÃ“N:
â€¢ Verifica configuraciÃ³n SMTP en email_sender.py
â€¢ Verifica conexiÃ³n a internet
â€¢ Revisa que la contraseÃ±a sea correcta

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ CHECKLIST ANTES DE MOVER A "COTIZACIÃ“N ENVIADA"
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Trato tiene cotizaciÃ³n vinculada
â–¡ Email del cliente estÃ¡ configurado
â–¡ Email del cliente es vÃ¡lido (tiene @)
â–¡ Firma del vendedor agregada (opcional)
â–¡ Mensaje personalizado agregado (opcional)
â–¡ Trato guardado
â–¡ Usuario tiene puesto "Vendedor"
â–¡ Servidor estÃ¡ corriendo
â–¡ Consola del servidor visible

Si TODOS los items estÃ¡n marcados âœ… â†’ El email se enviarÃ¡

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ§ª EJEMPLO COMPLETO PASO A PASO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. COTIZADOR genera cotizaciÃ³n T-00012
   â””â”€ La vincula al trato #5
   â””â”€ Mueve trato a "Cotizado"

2. TRATO aparece automÃ¡ticamente en CRM del VENDEDOR
   â””â”€ En columna "CotizaciÃ³n Lista para Enviar"

3. VENDEDOR edita el trato #5:
   â”œâ”€ Email cliente: cliente@empresa.com âœ…
   â”œâ”€ Firma: "Ing. Juan PÃ©rez - Ventas" âœ…
   â”œâ”€ Mensaje: "Quedamos atentos" âœ…
   â””â”€ Guarda trato âœ…

4. VENDEDOR arrastra trato a "CotizaciÃ³n enviada"

5. CONSOLA DEL SERVIDOR muestra:
   ğŸ” DEBUG: Trato movido a 'CotizaciÃ³n enviada' por usuario con puesto 'Vendedor'
   âœ… CondiciÃ³n cumplida: Etapa='CotizaciÃ³n enviada' y Puesto='Vendedor'
   âœ… CotizaciÃ³n encontrada: T-00012
   ğŸ“§ Email del cliente: cliente@empresa.com
   âœ… Iniciando envÃ­o de email...
   âœ… Email enviado desde juan@inair.com.mx (credenciales propias)
   âœ… PDF de cotizaciÃ³n T-00012 enviado a cliente@empresa.com

6. CLIENTE recibe email con PDF adjunto âœ…

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ¯ RESUMEN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ANTES:
âŒ No funcionaba
âŒ Sin mensajes
âŒ Imposible saber por quÃ© fallaba

AHORA:
âœ… FuncionarÃ¡ correctamente
âœ… Mensajes claros en consola
âœ… FÃ¡cil diagnosticar problemas
âœ… Te dice exactamente quÃ© falta

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âš ï¸ IMPORTANTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â€¢ REINICIA EL SERVIDOR para que los cambios surtan efecto
â€¢ ABRE LA CONSOLA del servidor para ver los mensajes
â€¢ CONFIGURA EL EMAIL del cliente ANTES de mover el trato
â€¢ VINCULA UNA COTIZACIÃ“N al trato primero

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CAMBIOS APLICADOS - REINICIA EL SERVIDOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•




